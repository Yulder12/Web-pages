<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación de Ecuación Matemática</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        table {
            margin: 0 auto;
            border-collapse: collapse;
            width: 40%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
        canvas {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Programación Web Corte 1</h1>
    <p>Nombre Completo: Yulder Felipe Orozco Londoño</p>
    <p>Código: 2216616</p>
    
    <h2>Ecuación:</h2>
    <center>
    <img src="https://drive.google.com/file/d/1-p7W2cSzdgcCaEmbgBZVVr2EkLUdiscA/view?usp=sharing" width="500" height="130">
    </center>
    <p>
    <button onclick="procesar()">Procesar</button>
    </p>
    <h2>Resultados</h2>
    <table>
        <thead>
            <tr>
                <th>Tipo de Error</th>
                <th>Total</th>
                <th>Porcentaje</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Total de errores de arcoseno</td>
                <td id="totalArcsin">0</td>
                <td id="porcentajeArcsin">0%</td>
            </tr>
            <tr>
                <td>Total de errores de arcocoseno</td>
                <td id="totalArccos">0</td>
                <td id="porcentajeArccos">0%</td>
            </tr>
            <tr>
                <td>Total de errores de raíz cuadrada</td>
                <td id="totalSqrt">0</td>
                <td id="porcentajeSqrt">0%</td>
            </tr>
            <tr>
                <td>Total de errores de división</td>
                <td id="totalDivision">0</td>
                <td id="porcentajeDivision">0%</td>
            </tr>
            <tr>
                <td>Total de errores de logaritmo natural</td>
                <td id="totalLog">0</td>
                <td id="porcentajeLog">0%</td>
            </tr>
        </tbody>
    </table>

    <div style="width: 380px; height: 380px; margin: 0 auto;">
        <canvas id="myChart"></canvas>
    </div>

    <script>
    function procesar() {
        const totalCiclos = 1000;
        let totalArcsin = 0;
        let totalArccos = 0;
        let totalSqrt = 0;
        let totalDivision = 0;
        let totalLog = 0;

        for (let i = 0; i < totalCiclos; i++) {
            const a = Math.random() * 2 - 1;
            const b = Math.random() * 2 - 1;
            const c = Math.random() * 2 - 1;
            const d = Math.random() * 2 - 1;
            const e = Math.random() * 2 - 1;
            const f = Math.random() * 2 - 1;
            const g = Math.random() * 2 - 1;
            const h = Math.random() * 2 - 1;
            const i = Math.random() * 2 - 1;
            const j = Math.random() * 2 - 1;
            const k = Math.random() * 2 - 1;
            const l = Math.random() * 2 - 1;
            const m = Math.random() * 2 - 1;
            const n = Math.random() * 2 - 1;
            const o = Math.random() * 2 - 1;
            const p = Math.random() * 2 - 1;

            try {
                // Comprobamos manualmente el dominio de cada función
                if (a - b < -1 || a - b > 1) throw new Error('Arccos fuera de dominio');
                if (c + Math.sqrt(d) < -1 || c + Math.sqrt(d) > 1) throw new Error('Arcsin fuera de dominio');
                if (h - i < -1 || h - i > 1) throw new Error('Arccos fuera de dominio');
                if (j * k < -1 || j * k > 1) throw new Error('Arcsin fuera de dominio');
                if (n < 0) throw new Error('Raíz cuadrada de número negativo');
                if (e <= 0 || f <= 0 || o - p <= 0) throw new Error('Logaritmo de número no positivo');
                if (l === 0 || m === 0) throw new Error('División por cero');

                // Si todo es válido, calculamos el resultado
                const result = (Math.acos(a - b) + Math.asin(c + Math.sqrt(d)) + Math.log(e) / Math.log(f) + Math.sqrt(g)) /
                            ((Math.acos(h - i) + Math.asin(j * k) / (l / m)) * (Math.sqrt(n) + Math.log(o - p)));

            } catch (error) {
                console.log('Error encontrado:', error.message);

                if (error.message.includes('Arcsin')) totalArcsin++;
                if (error.message.includes('Arccos')) totalArccos++;
                if (error.message.includes('Raíz cuadrada')) totalSqrt++;
                if (error.message.includes('División')) totalDivision++;
                if (error.message.includes('Logaritmo')) totalLog++;
            }
        }

        const totalErrores = totalArcsin + totalArccos + totalSqrt + totalDivision + totalLog;
        const porcentajeArcsin = (totalArcsin / totalErrores * 100).toFixed(2);
        const porcentajeArccos = (totalArccos / totalErrores * 100).toFixed(2);
        const porcentajeSqrt = (totalSqrt / totalErrores * 100).toFixed(2);
        const porcentajeDivision = (totalDivision / totalErrores * 100).toFixed(2);
        const porcentajeLog = (totalLog / totalErrores * 100).toFixed(2);

        document.getElementById('totalArcsin').innerText = totalArcsin;
        document.getElementById('porcentajeArcsin').innerText = porcentajeArcsin + '%';
        document.getElementById('totalArccos').innerText = totalArccos;
        document.getElementById('porcentajeArccos').innerText = porcentajeArccos + '%';
        document.getElementById('totalSqrt').innerText = totalSqrt;
        document.getElementById('porcentajeSqrt').innerText = porcentajeSqrt + '%';
        document.getElementById('totalDivision').innerText = totalDivision;
        document.getElementById('porcentajeDivision').innerText = porcentajeDivision + '%';
        document.getElementById('totalLog').innerText = totalLog;
        document.getElementById('porcentajeLog').innerText = porcentajeLog + '%';

        const ctx = document.getElementById('myChart').getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Errores Arcsin', 'Errores Arccos', 'Errores Raíz Cuadrada', 'Errores División', 'Errores Logaritmo'],
                datasets: [{
                    label: 'Errores',
                    data: [totalArcsin, totalArccos, totalSqrt, totalDivision, totalLog],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                aspectRatio: 1, // Mantiene un aspecto 1:1
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        enabled: true
                    },
                },
                layout:{
                    padding: 20
                }
            }
        });
    }
    </script>
</body>
</html>
